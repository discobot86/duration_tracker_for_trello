<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Duration Tracker for Trello</title>

  <!-- 1) Load Trello’s Power-Up client library -->
  <script src="https://p.trellocdn.com/power-up.min.js"></script>

  <!-- (Optional) Any CSS you already had can go here -->
  <style>
    /* Example styling—you can remove or replace with your own */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    #content {
      padding: 10px;
    }
  </style>
</head>
<body>
  <!-- 
    2) This <div> is where your existing UI goes.
       If you already had HTML here, copy it in exactly as it was.
  -->
  <div id="content">
    <!-- === BEGIN your original content === -->

    <!-- 
      (Paste whatever was already in index.html here. 
       For example, if you already had a header, buttons, etc., just drop it in.) 
    -->
    <h2>Duration Tracker</h2>
    <p>Loading duration data…</p>
    <!-- === END your original content === -->
  </div>

  <!-- 3) Initialize the Power-Up and declare the card-back-section capability -->
  <script>
    window.TrelloPowerUp.initialize({
      // This key must match “card-back-section”
      'card-back-section': function(t, opts) {
        return {
          // The header title of your section on the card back
          title: 'Track Duration',

          // A small 32×32 or 64×64 icon shown next to the title
          icon: 'https://raw.githubusercontent.com/discobot86/duration_tracker_for_trello/main/icon.png',

          // Define the content as an iframe pointing back to this page
          content: {
            type: 'iframe',
            // When Trello renders the card back, it will load index.html inside this iframe
            url: t.signUrl('./index.html'),
            height: 150 // Adjust if you need more/less vertical space
          },

          // (Optional) Add a Refresh button in the section header
          action: {
            text: 'Refresh',
            callback: function(t) {
              // Example: Show a tiny popup when the user clicks “Refresh”
              return t.popup({
                title: 'Refreshed',
                body: 'Duration data has been updated.'
              });
            }
          }
        };
      }

      // … you can register more capabilities here if needed …
    });
  </script>
</body>
</html>
